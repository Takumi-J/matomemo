<div class="row">
 <div class = "col-md-5">
  <div class="sub-ti">
   <h2>作品一覧</h2>
  </div>
 </div>
</div>

<div class="row">
 <div class = "col-md-2 offset-md-9">
  
  <table>
      <%= search_form_for @q, url: works_path do |f| %>
        <div class="field">
          <tr>
            <th>
              <%= f.label :title_cont, '作品検索' %>
            </th>
          </tr>

          <tr>
            <td>
              <%= f.search_field :title_cont, :placeholder => "作品名"%>
            </td>
            
            <td>
             <div class="actions">
              <%= f.submit('検索',class: 'btn btn-secondary') %>
             </div>
            </td>
          </tr>
          
        </div>
      <% end %>
    </table>
  
 </div>
</div>

<br>

<% if @results.blank? %>
<!--全ての作品を一覧表示-->
 <table class="table">
 
   <tr>
     <th>作品媒体</th>
     <th>公開日</th>
     <th>作品名</th>
     <th>ジャンル</th>
     <!--<th>評価</th>-->
   </tr>
 
   <% @works.each do|work| %>
    <tr>
     <td><%= work.medium %></td>
     <td><%= work.release_date %></td>
     <td><%= link_to "#{work.title}","/works/#{work.id}" %></td>
     <td>
       <% work.genre_mngs.each do|genre| %>
        <%= Genre.find(genre.genre_id).name %>　<!--左に全角スペースあり-->
       <% end %>
     </td>
    </tr>
   <% end %>
   
 </table>

<% else %>

<!--検索結果を一覧表示-->
 <table class="table">
 
   <tr>
     <th>作品媒体</th>
     <th>公開日</th>
     <th>作品名</th>
     <th>ジャンル</th>
     <!--<th>評価</th>-->
   </tr>
 
   <% @results.each do|work| %>
    <tr>
     <td><%= work.medium %></td>
     <td><%= work.release_date %></td>
     <td><%= link_to "#{work.title}","/works/#{work.id}" %></td>
     <td>
       <% work.genre_mngs.each do|genre| %>
        <%= Genre.find(genre.genre_id).name %>　<!--左に全角スペースあり-->
       <% end %>
     </td>
     
     <!--<td>-->
      <!--%= link_to("/admin/works/#{work.id}",method: :delete, data: {confirm: "本当に削除しますか？"} ) do %>-->
      <!--<button type="button">削除する</button>-->
      <!--%end%>-->
     <!--</td>-->
    </tr>
 
   <% end %>
   
 </table>

<% end %>

  <%= paginate @works %>

